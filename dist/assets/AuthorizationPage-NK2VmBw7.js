import{u as p,a as x,s as g,j as e,aL as n,aN as k}from"./index-As-lCRMV.js";import{u as j,C as m}from"./index.esm-Cd_zhQT7.js";import{B as N}from"./button-CB67oyFN.js";const v="_form_mqk7h_1",y="_form__content_mqk7h_7",b="_form__header_mqk7h_18",q="_form__row_mqk7h_24",w="_form__block_mqk7h_30",S="_form__input_mqk7h_35",C="_form__buttons_mqk7h_40",E="_form__footer_mqk7h_45",s={form:v,form__content:y,form__header:b,form__row:q,form__block:w,form__input:S,form__buttons:C,form__footer:E},H=()=>{const t=p(),_=x(),[i,c]=g.useMessage(),l=()=>{i.open({type:"success",content:"Вы успешно авторизовались"})},d=j({mode:"onTouched",resetOptions:{keepErrors:!0,keepDirtyValues:!0},defaultValues:{email:"",password:""}}),{control:a,formState:{isValid:f},reset:u}=d,h=async()=>{try{_(k({user:{firstName:"Даниил",lastName:"Заварин"},userToken:"danyazavarin"})),localStorage.setItem("userInfo",JSON.stringify({user:{firstName:"Даниил",lastName:"Заварин"},userToken:"danyazavarin"})),u(),l(),setTimeout(()=>t("/main",{replace:!0}),1500)}catch(r){console.log("error",r)}};return e.jsxs("form",{className:s.form,children:[c,e.jsxs("main",{className:s.form__content,children:[e.jsx("header",{className:s.form__header,children:"Авторизация"}),e.jsxs("div",{className:s.form__row,children:[e.jsx(m,{control:a,name:"email",rules:{required:"Введите свой email",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"Неверный формат email"}},render:({field:r,fieldState:{error:o}})=>e.jsxs("div",{className:s.form__block,children:[e.jsx(n,{isError:!!o,className:s.form__input,type:"email",placeholder:"Введите свой email",...r}),o&&e.jsx("div",{style:{color:"red"},children:o.message})]})}),e.jsx(m,{control:a,name:"password",rules:{required:"Введите пароль",minLength:{value:2,message:"Пароль не может быть меньше 2 символов"}},render:({field:r,fieldState:{error:o}})=>e.jsxs("div",{className:s.form__block,children:[e.jsx(n,{isError:!!o,className:s.form__input,type:"text",placeholder:"Введите пароль",...r}),o&&e.jsx("div",{style:{color:"red"},children:o.message})]})})]}),e.jsx("div",{className:s.form__buttons,children:e.jsx(N,{disabled:!f,style:{minHeight:"65px",lineHeight:1,minWidth:"25rem",padding:"20px 30px",fontWeight:500},onClick:()=>h(),children:"Авторизоваться"})}),e.jsxs("div",{className:s.form__footer,children:[e.jsx("span",{onClick:()=>t("/registration"),children:"Зарегистрироваться"}),e.jsx("span",{onClick:()=>t("/main"),children:"Продолжить без авторизации"})]})]})]})};export{H as default};
